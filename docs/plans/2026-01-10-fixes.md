# Fixes Implementation Plan

> **For Claude:** REQUIRED SUB-SKILL: Use superpowers:executing-plans to implement this plan task-by-task.

**Goal:** Resolve build errors (null safety), fix failing tests, and implement missing actions in Collections page.

**Architecture:** Standard React/TypeScript patterns.

**Tech Stack:** TypeScript, React, Vitest

---

### Task 1: Fix Build Errors (Null Safety)

**Files:**
- Modify: `src/components/dashboard/IconSidebar.tsx`
- Modify: `src/services/profileService.ts`

**Step 1: Fix `IconSidebar.tsx`**
- Issue: `const { isDarkMode, toggleTheme } = useTheme();` might be potentially unsafe if context is missing, or destructuring issue reported in build log.
- Fix: Ensure `useTheme` is used correctly. Actually, the error `TS6198: All destructured elements are unused` suggests `isDarkMode` and `toggleTheme` are unused.
- Action: Remove unused destructured variables if they are indeed unused, or use them if intended. (Lines 71, 96 says "Theme Toggle Removed", so they are likely unused).

**Step 2: Fix `profileService.ts`**
- Issue: `TS18047: 'supabase' is possibly 'null'`.
- Fix: Add null checks for `supabase` client if it can be null (it usually shouldn't be if initialized correctly, but TS thinks so). Or use non-null assertion if confident, better to guard.
- Action: Check `supabase.auth` and `supabase.storage` usage.

---

### Task 2: Fix Landing Page Test

**Files:**
- Modify: `src/pages/__tests__/LandingPage.test.tsx`

**Step 1: Update Asset Path**
- Issue: Expects `/Logo.mp4`, likely needs import or different path.
- Fix: Check actual video file usage in `HeroSection` (implied).
- Action: Update expectation to match actual regex or path found in app.

---

### Task 3: Connect Collection Actions

**Files:**
- Modify: `src/pages/Collections.tsx`

**Step 1: Connect `onDelete`**
- Action: Implement `handleDelete` function calling `indexedDbService.update(id, { deleted_at: new Date().toISOString() })`.
- Refresh list after delete.

**Step 2: Connect `onEdit`**
- Action: Implement `handleEdit` navigation or modal. Usually navigates to home/edit with prompt ID.

---
